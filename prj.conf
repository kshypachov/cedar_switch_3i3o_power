CONFIG_THREAD_MONITOR=y
CONFIG_THREAD_NAME=y

CONFIG_PRINTK=y

CONFIG_MAIN_STACK_SIZE=2048
CONFIG_HEAP_MEM_POOL_SIZE=8192

CONFIG_NETWORKING=y
CONFIG_NET_IPV6=y
CONFIG_NET_IPV4=y
CONFIG_NET_ARP=y
CONFIG_NET_UDP=y
CONFIG_NET_TCP=y
CONFIG_NET_DHCPV4=y
CONFIG_NET_L2_ETHERNET=y
CONFIG_ETH_W5500=y

CONFIG_TEST_RANDOM_GENERATOR=y

CONFIG_INIT_STACKS=y

CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y

CONFIG_NET_LOG=y
CONFIG_LOG=y

CONFIG_SLIP_STATISTICS=n
CONFIG_NET_SHELL=y

CONFIG_GPIO=y

# Flash support
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FLASH_MAP=y
CONFIG_SPI_NOR=y
CONFIG_SPI_NOR_SFDP_DEVICETREE=n
CONFIG_SPI_NOR_SFDP_RUNTIME=y

# LittleFS
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y

# SPI support
CONFIG_SPI=y

#CONFIG_CONSOLE=y
#CONFIG_UART_CONSOLE=n
#CONFIG_USB_DEVICE_STACK=y
#CONFIG_USB_CDC_ACM=y

#CONFIG_SERIAL=y
#CONFIG_USB_DEVICE_STACK=y
#CONFIG_USB_CDC_ACM=y
#CONFIG_UART_CONSOLE=y


#CONFIG_SERIAL=y
#CONFIG_USB_DEVICE_STACK=y
#CONFIG_USB_CDC_ACM=y

# Консоль через USB
#CONFIG_UART_CONSOLE=y

CONFIG_GPIO=y
CONFIG_LED=y
CONFIG_LED_GPIO=y

# ==== USB девайс ====
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_CDC_ACM=y

# Произвольные VID/PID; можно взять дефолт Zephyr VID
CONFIG_USB_DEVICE_VID=0x2FE3
CONFIG_USB_DEVICE_PID=0x0100
CONFIG_USB_DEVICE_PRODUCT="AQ Sensor"

# Консоль через USB CDC-ACM
CONFIG_CONSOLE=y
# отключаем обычную UART-консоль
CONFIG_UART_CONSOLE=n
CONFIG_PRINTK=y
CONFIG_LOG=y



# USB стек
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_DC_STM32=y
# замените на свои VID/PID
CONFIG_USB_DEVICE_VID=0x1209
CONFIG_USB_DEVICE_PID=0x0001
CONFIG_USB_DEVICE_MANUFACTURER="YourCompany"
CONFIG_USB_DEVICE_PRODUCT="AQ Sensor"

# CDC-ACM класс
CONFIG_USB_CDC_ACM=y
# можно так, либо вручную usb_enable()
CONFIG_USB_DEVICE_INITIALIZE_AT_BOOT=y

# Консоль/лог в CDC
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=n
#CONFIG_USB_DEVICE_STACK_NEXT_DEVNAME=y
CONFIG_LOG=y
CONFIG_LOG_MODE_DEFERRED=y
#CONFIG_LOG_BACKEND_USB=y
CONFIG_LOG_PROCESS_THREAD=y

# Если VBUS не разведен на PA9 — отключить детект
#CONFIG_USB_DC_STM32_VBUS_SENSING=n

CONFIG_SPI=y
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y
 # опционально, если дальше будете заводить партиции
CONFIG_FLASH_MAP=y

# Для SPI NOR драйвера:
CONFIG_SPI_NOR=y

CONFIG_FLASH_JESD216_API=y
CONFIG_SPI_NOR_SFDP_RUNTIME=y

CONFIG_NET_SHELL=y
CONFIG_KERNEL_SHELL=y
CONFIG_SHELL_BACKEND_TELNET=y
CONFIG_SHELL_TELNET_SUPPORT_COMMAND=y

CONFIG_ZBUS=y

# ФС: LittleFS
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y
CONFIG_FS_LOG_LEVEL_ERR=y
#CONFIG_FS_LITTLEFS_CHECK_ALWAYS=y

# (Опционально) POSIX API — не обязателен, мы используем fs_*, но может пригодиться
CONFIG_POSIX_API=y

CONFIG_FLASH=y
# нужно для NVS по FIXED_PARTITION_ID
CONFIG_FLASH_MAP=y
CONFIG_SPI_NOR=y
#CONFIG_MTD=y
#CONFIG_MTD_SPI_NOR=y
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y
# LittleFS поверх MTD-устройства
#CONFIG_FS_LITTLEFS_MTD=y
CONFIG_NVS=y
#CONFIG_SETTINGS=y
#CONFIG_SETTINGS_NVS=y
CONFIG_FLASH_PAGE_LAYOUT=y


CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y
CONFIG_FILE_SYSTEM_MKFS=y
CONFIG_SPI_NOR_FLASH_LAYOUT_PAGE_SIZE=4096

CONFIG_NET_SOCKETS=y
CONFIG_NET_TCP=y
CONFIG_NET_UDP=y
CONFIG_NET_IPV4=y

CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y

CONFIG_POSIX_API=y

# JSON
CONFIG_JSON_LIBRARY=y

CONFIG_SHELL_LOG_BACKEND=y

CONFIG_SETTINGS=y
CONFIG_SETTINGS_RUNTIME=y
CONFIG_SETTINGS_NVS=y

CONFIG_HTTP_SERVER=y
CONFIG_ZVFS_EVENTFD_MAX=2
CONFIG_NET_MAX_CONTEXTS=16
CONFIG_NET_MAX_CONN=15

#CONFIG_DNS_RESOLVER=y